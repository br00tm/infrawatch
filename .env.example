# =============================================================================
# InfraWatch — Environment Variables
# =============================================================================
# Copy this file to .env (development) or .env.prod (production) and fill in
# all required values. Never commit the actual .env / .env.prod files.
#
# Required fields are marked with: [REQUIRED]
# Fields with defaults are marked with: [DEFAULT: value]
# =============================================================================

# ===================
# Application
# ===================
APP_NAME=InfraWatch
APP_ENV=production           # development | staging | production
DEBUG=false                  # NEVER set true in production
APP_VERSION=latest           # Docker image tag (e.g. v1.2.3)

# ===================
# Docker Images
# ===================
# Used by docker-compose.prod.yml to pull pre-built images from GHCR.
# Replace "br00tm" with your actual GitHub org/user.
BACKEND_IMAGE=ghcr.io/br00tm/infrawatch/backend    # [REQUIRED]
FRONTEND_IMAGE=ghcr.io/br00tm/infrawatch/frontend  # [REQUIRED]
WORKER_IMAGE=ghcr.io/br00tm/infrawatch/workers     # [REQUIRED]

# ===================
# MongoDB
# ===================
MONGODB_USER=infrawatch                              # [REQUIRED]
MONGODB_PASSWORD=change-me-strong-password          # [REQUIRED] min 16 chars
MONGODB_DB=infrawatch                               # [DEFAULT: infrawatch]
# Full connection URL (auto-built by compose, but set for local dev)
MONGODB_URL=mongodb://infrawatch:change-me-strong-password@localhost:27017/infrawatch?authSource=admin

# ===================
# Redis
# ===================
REDIS_PASSWORD=change-me-redis-password             # [REQUIRED] min 16 chars
REDIS_URL=redis://:change-me-redis-password@localhost:6379/0

# ===================
# RabbitMQ
# ===================
RABBITMQ_USER=infrawatch                            # [REQUIRED]
RABBITMQ_PASSWORD=change-me-rabbitmq-password      # [REQUIRED] min 16 chars
RABBITMQ_URL=amqp://infrawatch:change-me-rabbitmq-password@localhost:5672/

# ===================
# JWT Authentication
# ===================
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=change-me-generate-a-real-secret    # [REQUIRED] 64+ hex chars
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ===================
# Celery Workers
# ===================
CELERY_BROKER_URL=redis://:change-me-redis-password@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:change-me-redis-password@localhost:6379/2
WORKER_CONCURRENCY=4

# ===================
# CORS
# ===================
# JSON array of allowed origins. In production, set to your actual domain.
CORS_ORIGINS=["https://infrawatch.example.com"]

# ===================
# Domain & TLS
# ===================
DOMAIN=infrawatch.example.com                       # [REQUIRED]
GRAFANA_ROOT_URL=https://grafana.infrawatch.example.com

# ===================
# Grafana
# ===================
GRAFANA_USER=admin
GRAFANA_PASSWORD=change-me-grafana-password         # [REQUIRED]

# ===================
# Prometheus
# ===================
PROMETHEUS_RETENTION=30d

# ===================
# Email / SMTP Notifications
# ===================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=alerts@example.com
SMTP_PASSWORD=                                      # [REQUIRED if email alerts enabled]
SMTP_TLS=true
EMAIL_FROM=InfraWatch Alerts <alerts@example.com>

# ===================
# Telegram Notifications
# ===================
# Get bot token from @BotFather, chat_id from @userinfobot
TELEGRAM_BOT_TOKEN=                                 # [REQUIRED if Telegram alerts enabled]
TELEGRAM_CHAT_ID=                                   # [REQUIRED if Telegram alerts enabled]

# ===================
# Discord Notifications
# ===================
DISCORD_WEBHOOK_URL=                                # [REQUIRED if Discord alerts enabled]

# ===================
# PagerDuty (Production On-Call)
# ===================
PAGERDUTY_INTEGRATION_KEY=                          # [REQUIRED if PagerDuty enabled]

# ===================
# Slack Notifications
# ===================
SLACK_WEBHOOK_URL=                                  # [REQUIRED if Slack alerts enabled]
SLACK_CHANNEL=#infrawatch-alerts

# ===================
# Sentry (Error Tracking)
# ===================
SENTRY_DSN=                                         # Optional — enables error tracking
SENTRY_ENVIRONMENT=production

# ===================
# Rate Limiting
# ===================
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=200

# ===================
# Feature Flags
# ===================
ENABLE_REGISTRATION=false    # Disable public registration in production
ENABLE_DEMO_DATA=false       # Never seed demo data in production
